import{r as l,k as de,A as me,l as ye,m as be,j as I,P as Ee,n as ge}from"./index-BDLyIa_D.js";import{C as Ve}from"./Container-KGGAhOYV.js";import{T as pe}from"./Title-CZWlSf7w.js";import{T as Se}from"./Text-BSaCGHMh.js";import{I as M}from"./Input-yUY_NEJ7.js";function je(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const Fe=typeof window<"u"?l.useLayoutEffect:l.useEffect;function j(t,e){Fe(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function he(t,e){t&&je(t),j(`mantine-form:${t}:set-field-value`,r=>e.setFieldValue(r.detail.path,r.detail.value)),j(`mantine-form:${t}:set-values`,r=>e.setValues(r.detail)),j(`mantine-form:${t}:set-initial-values`,r=>e.setInitialValues(r.detail)),j(`mantine-form:${t}:set-errors`,r=>e.setErrors(r.detail)),j(`mantine-form:${t}:set-field-error`,r=>e.setFieldError(r.detail.path,r.detail.error)),j(`mantine-form:${t}:clear-field-error`,r=>e.clearFieldError(r.detail)),j(`mantine-form:${t}:clear-errors`,e.clearErrors),j(`mantine-form:${t}:reset`,e.reset),j(`mantine-form:${t}:validate`,e.validate),j(`mantine-form:${t}:validate-field`,r=>e.validateField(r.detail)),j(`mantine-form:${t}:reorder-list-item`,r=>e.reorderListItem(r.detail.path,r.detail.payload)),j(`mantine-form:${t}:remove-list-item`,r=>e.removeListItem(r.detail.path,r.detail.index)),j(`mantine-form:${t}:insert-list-item`,r=>e.insertListItem(r.detail.path,r.detail.item,r.detail.index)),j(`mantine-form:${t}:set-dirty`,r=>e.setDirty(r.detail)),j(`mantine-form:${t}:set-touched`,r=>e.setTouched(r.detail)),j(`mantine-form:${t}:reset-dirty`,r=>e.resetDirty(r.detail)),j(`mantine-form:${t}:reset-touched`,e.resetTouched)}function ke(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:r}=e;r instanceof HTMLInputElement?r.type==="checkbox"?t(r.checked):t(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&t(r.value)}else t(e)}}function H(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,r)=>{const n=t[r];return n!=null&&n!==!1&&(e[r]=n),e},{})}function Ce(t){const[e,r]=l.useState(H(t)),n=l.useRef(e),s=l.useCallback(u=>{r(a=>{const g=H(typeof u=="function"?u(a):u);return n.current=g,g})},[]),i=l.useCallback(()=>s({}),[]),o=l.useCallback(u=>{n.current[u]!==void 0&&s(a=>{const g={...a};return delete g[u],g})},[e]),f=l.useCallback((u,a)=>{a==null||a===!1?o(u):n.current[u]!==a&&s(g=>({...g,[u]:a}))},[e]);return{errorsState:e,setErrors:s,clearErrors:i,setFieldError:f,clearFieldError:o}}function U(t,e){if(e===null||typeof e!="object")return{};const r={...e};return Object.keys(e).forEach(n=>{n.includes(`${String(t)}.`)&&delete r[n]}),r}function Z(t,e){const r=t.substring(e.length+1).split(".")[0];return parseInt(r,10)}function Q(t,e,r,n){if(e===void 0)return r;const s=`${String(t)}`;let i=r;n===-1&&(i=U(`${s}.${e}`,i));const o={...i},f=new Set;return Object.entries(i).filter(([u])=>{if(!u.startsWith(`${s}.`))return!1;const a=Z(u,s);return Number.isNaN(a)?!1:a>=e}).forEach(([u,a])=>{const g=Z(u,s),p=u.replace(`${s}.${g}`,`${s}.${g+n}`);o[p]=a,f.add(p),f.has(u)||delete o[u]}),o}function Oe(t,{from:e,to:r},n){const s=`${t}.${e}`,i=`${t}.${r}`,o={...n};return Object.keys(n).every(f=>{let u,a;if(f.startsWith(s)&&(u=f,a=f.replace(s,i)),f.startsWith(i)&&(u=f.replace(i,s),a=f),u&&a){const g=o[u],p=o[a];return p===void 0?delete o[u]:o[u]=p,g===void 0?delete o[a]:o[a]=g,!1}return!0}),o}function G(t,e,r){typeof r.value=="object"&&(r.value=_(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function _(t){if(typeof t!="object")return t;var e=0,r,n,s,i=Object.prototype.toString.call(t);if(i==="[object Object]"?s=Object.create(t.__proto__||null):i==="[object Array]"?s=Array(t.length):i==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(_(o))})):i==="[object Map]"?(s=new Map,t.forEach(function(o,f){s.set(_(f),_(o))})):i==="[object Date]"?s=new Date(+t):i==="[object RegExp]"?s=new RegExp(t.source,t.flags):i==="[object DataView]"?s=new t.constructor(_(t.buffer)):i==="[object ArrayBuffer]"?s=t.slice(0):i.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)G(s,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(s,r=n[e])&&s[r]===t[r]||G(s,r,Object.getOwnPropertyDescriptor(t,r))}return s||t}function se(t){return typeof t!="string"?[]:t.split(".")}function h(t,e){const r=se(t);if(r.length===0||typeof e!="object"||e===null)return;let n=e[r[0]];for(let s=1;s<r.length&&n!=null;s+=1)n=n[r[s]];return n}function K(t,e,r){const n=se(t);if(n.length===0)return r;const s=_(r);if(n.length===1)return s[n[0]]=e,s;let i=s[n[0]];for(let o=1;o<n.length-1;o+=1){if(i===void 0)return s;i=i[n[o]]}return i[n[n.length-1]]=e,s}function we(t,{from:e,to:r},n){const s=h(t,n);if(!Array.isArray(s))return n;const i=[...s],o=s[e];return i.splice(e,1),i.splice(r,0,o),K(t,i,n)}function De(t,e,r,n){const s=h(t,n);if(!Array.isArray(s))return n;const i=[...s];return i.splice(typeof r=="number"?r:i.length,0,e),K(t,i,n)}function $e(t,e,r){const n=h(t,r);return Array.isArray(n)?K(t,n.filter((s,i)=>i!==e),r):r}function Ae({$values:t,$errors:e,$status:r}){const n=l.useCallback((o,f)=>{r.clearFieldDirty(o),e.setErrors(u=>Oe(o,f,u)),t.setValues({values:we(o,f,t.refValues.current),updateState:!0})},[]),s=l.useCallback((o,f)=>{r.clearFieldDirty(o),e.setErrors(u=>Q(o,f,u,-1)),t.setValues({values:$e(o,f,t.refValues.current),updateState:!0})},[]),i=l.useCallback((o,f,u)=>{r.clearFieldDirty(o),e.setErrors(a=>Q(o,u,a,1)),t.setValues({values:De(o,f,u,t.refValues.current),updateState:!0})},[]);return{reorderListItem:n,removeListItem:s,insertListItem:i}}var Te=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};const x=de(Te);function W(t,e){const r=Object.keys(t);if(typeof e=="string"){const n=r.filter(s=>s.startsWith(`${e}.`));return t[e]||n.some(s=>t[s])||!1}return r.some(n=>t[n])}function Ie({initialDirty:t,initialTouched:e,mode:r,$values:n}){const[s,i]=l.useState(e),[o,f]=l.useState(t),u=l.useRef(e),a=l.useRef(t),g=l.useCallback(d=>{const b=typeof d=="function"?d(u.current):d;u.current=b,r==="controlled"&&i(b)},[]),p=l.useCallback((d,b=!1)=>{const S=typeof d=="function"?d(a.current):d;a.current=S,(r==="controlled"||b)&&f(S)},[]),k=l.useCallback(()=>g({}),[]),V=d=>{const b=d?{...d,...n.refValues.current}:n.refValues.current;n.setValuesSnapshot(b),p({})},y=l.useCallback((d,b)=>{g(S=>W(S,d)===b?S:{...S,[d]:b})},[]),m=l.useCallback((d,b,S)=>{p(D=>W(D,d)===b?D:{...D,[d]:b},S)},[]),C=l.useCallback((d,b)=>{const S=W(a.current,d),D=!x(h(d,n.getValuesSnapshot()),b),P=U(d,a.current);P[d]=D,p(P,S!==D)},[]),O=l.useCallback(d=>W(u.current,d),[]),L=l.useCallback(d=>p(b=>{if(typeof d!="string")return b;const S=U(d,b);return delete S[d],x(S,b)?b:S}),[]),w=l.useCallback(d=>{if(d){const S=h(d,a.current);if(typeof S=="boolean")return S;const D=h(d,n.refValues.current),P=h(d,n.valuesSnapshot.current);return!x(D,P)}return Object.keys(a.current).length>0?W(a.current):!x(n.refValues.current,n.valuesSnapshot.current)},[]),R=l.useCallback(()=>a.current,[]),$=l.useCallback(()=>u.current,[]);return{touchedState:s,dirtyState:o,touchedRef:u,dirtyRef:a,setTouched:g,setDirty:p,resetDirty:V,resetTouched:k,isTouched:O,setFieldTouched:y,setFieldDirty:m,setTouchedState:i,setDirtyState:f,clearFieldDirty:L,isDirty:w,getDirty:R,getTouched:$,setCalculatedFieldDirty:C}}function Re({initialValues:t,onValuesChange:e,mode:r}){const n=l.useRef(!1),[s,i]=l.useState(t||{}),o=l.useRef(s),f=l.useRef(s),u=l.useCallback(({values:m,subscribers:C,updateState:O=!0,mergeWithPreviousValues:L=!0})=>{const w=o.current,R=m instanceof Function?m(o.current):m,$=L?{...w,...R}:R;o.current=$,O&&i($),e==null||e($,w),C==null||C.filter(Boolean).forEach(d=>d({updatedValues:$,previousValues:w}))},[e]),a=l.useCallback(m=>{var L;const C=h(m.path,o.current),O=m.value instanceof Function?m.value(C):m.value;if(C!==O){const w=o.current,R=K(m.path,O,o.current);u({values:R,updateState:m.updateState}),(L=m.subscribers)==null||L.filter(Boolean).forEach($=>$({path:m.path,updatedValues:R,previousValues:w}))}},[u]),g=l.useCallback(m=>{f.current=m},[]),p=l.useCallback((m,C)=>{n.current||(n.current=!0,u({values:m,updateState:r==="controlled"}),g(m),C())},[u]),k=l.useCallback(()=>{u({values:f.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),V=l.useCallback(()=>o.current,[]),y=l.useCallback(()=>f.current,[]);return{initialized:n,stateValues:s,refValues:o,valuesSnapshot:f,setValues:u,setFieldValue:a,resetValues:k,setValuesSnapshot:g,initialize:p,getValues:V,getValuesSnapshot:y}}function Le({$status:t}){const e=l.useRef({}),r=l.useCallback((s,i)=>{l.useEffect(()=>(e.current[s]=e.current[s]||[],e.current[s].push(i),()=>{e.current[s]=e.current[s].filter(o=>o!==i)}),[i])},[]),n=l.useCallback(s=>e.current[s]?e.current[s].map(i=>o=>i({previousValue:h(s,o.previousValues),value:h(s,o.updatedValues),touched:t.isTouched(s),dirty:t.isDirty(s)})):[],[]);return{subscribers:e,watch:r,getFieldSubscribers:n}}function ee(t,e){return t?`${t}-${e.toString()}`:e.toString()}function te(t){const e=H(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function X(t,e,r="",n={}){return typeof t!="object"||t===null?n:Object.keys(t).reduce((s,i)=>{const o=t[i],f=`${r===""?"":`${r}.`}${i}`,u=h(f,e);let a=!1;return typeof o=="function"&&(s[f]=o(u,e,f)),typeof o=="object"&&Array.isArray(u)&&(a=!0,u.forEach((g,p)=>X(o,e,`${f}.${p}`,s))),typeof o=="object"&&typeof u=="object"&&u!==null&&(a||X(o,e,f,s)),s},n)}function J(t,e){return te(typeof t=="function"?t(e):X(t,e))}function B(t,e,r){if(typeof t!="string")return{hasError:!1,error:null};const n=J(e,r),s=Object.keys(n.errors).find(i=>t.split(".").every((o,f)=>o===i.split(".")[f]));return{hasError:!!s,error:s?n.errors[s]:null}}const Pe="__MANTINE_FORM_INDEX__";function re(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]/g,`.${Pe}`)):!1:!1}function _e({name:t,mode:e="controlled",initialValues:r,initialErrors:n={},initialDirty:s={},initialTouched:i={},clearInputErrorOnChange:o=!0,validateInputOnChange:f=!1,validateInputOnBlur:u=!1,onValuesChange:a,transformValues:g=V=>V,enhanceGetInputProps:p,validate:k}={}){const V=Ce(n),y=Re({initialValues:r,onValuesChange:a,mode:e}),m=Ie({initialDirty:s,initialTouched:i,$values:y,mode:e}),C=Ae({$values:y,$errors:V,$status:m}),O=Le({$status:m}),[L,w]=l.useState(0),[R,$]=l.useState({}),d=l.useCallback(()=>{y.resetValues(),V.clearErrors(),m.resetDirty(),m.resetTouched(),e==="uncontrolled"&&w(c=>c+1)},[]),b=l.useCallback(c=>{o&&V.clearErrors(),e==="uncontrolled"&&w(E=>E+1),Object.keys(O.subscribers.current).forEach(E=>{const F=h(E,y.refValues.current),A=h(E,c);F!==A&&O.getFieldSubscribers(E).forEach(v=>v({previousValues:c,updatedValues:y.refValues.current}))})},[o]),S=l.useCallback(c=>{const E=y.refValues.current;y.initialize(c,()=>e==="uncontrolled"&&w(F=>F+1)),b(E)},[b]),D=l.useCallback((c,E,F)=>{const A=re(c,f),v=E instanceof Function?E(h(c,y.refValues.current)):E;m.setCalculatedFieldDirty(c,v),m.setFieldTouched(c,!0),!A&&o&&V.clearFieldError(c),y.setFieldValue({path:c,value:E,updateState:e==="controlled",subscribers:[...O.getFieldSubscribers(c),A?N=>{const T=B(c,k,N.updatedValues);T.hasError?V.setFieldError(c,T.error):V.clearFieldError(c)}:null,(F==null?void 0:F.forceUpdate)!==!1&&e!=="controlled"?()=>$(N=>({...N,[c]:(N[c]||0)+1})):null]})},[a,k]),P=l.useCallback(c=>{const E=y.refValues.current;y.setValues({values:c,updateState:e==="controlled"}),b(E)},[a,b]),Y=l.useCallback(()=>{const c=J(k,y.refValues.current);return V.setErrors(c.errors),c},[k]),ne=l.useCallback(c=>{const E=B(c,k,y.refValues.current);return E.hasError?V.setFieldError(c,E.error):V.clearFieldError(c),E},[k]),oe=(c,{type:E="input",withError:F=!0,withFocus:A=!0,...v}={})=>{const T={onChange:ke(z=>D(c,z,{forceUpdate:!1})),"data-path":ee(t,c)};return F&&(T.error=V.errorsState[c]),E==="checkbox"?T[e==="controlled"?"checked":"defaultChecked"]=h(c,y.refValues.current):T[e==="controlled"?"value":"defaultValue"]=h(c,y.refValues.current),A&&(T.onFocus=()=>m.setFieldTouched(c,!0),T.onBlur=()=>{if(re(c,u)){const z=B(c,k,y.refValues.current);z.hasError?V.setFieldError(c,z.error):V.clearFieldError(c)}}),Object.assign(T,p==null?void 0:p({inputProps:T,field:c,options:{type:E,withError:F,withFocus:A,...v},form:q}))},ie=(c,E)=>F=>{F==null||F.preventDefault();const A=Y();A.hasErrors?E==null||E(A.errors,y.refValues.current,F):c==null||c(g(y.refValues.current),F)},ce=c=>g(c||y.refValues.current),ue=l.useCallback(c=>{c.preventDefault(),d()},[]),le=l.useCallback(c=>c?!B(c,k,y.refValues.current).hasError:!J(k,y.refValues.current).hasErrors,[k]),ae=c=>`${L}-${c}-${R[c]||0}`,fe=l.useCallback(c=>document.querySelector(`[data-path="${ee(t,c)}"]`),[]),q={watch:O.watch,initialized:y.initialized.current,values:y.stateValues,getValues:y.getValues,setInitialValues:y.setValuesSnapshot,initialize:S,setValues:P,setFieldValue:D,errors:V.errorsState,setErrors:V.setErrors,setFieldError:V.setFieldError,clearFieldError:V.clearFieldError,clearErrors:V.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:C.reorderListItem,insertListItem:C.insertListItem,removeListItem:C.removeListItem,reset:d,validate:Y,validateField:ne,getInputProps:oe,onSubmit:ie,onReset:ue,isValid:le,getTransformedValues:ce,key:ae,getInputNode:fe};return he(t,q),q}function ve(t){const e=t||!0;return r=>typeof r=="string"?r.trim().length>0?null:e:Array.isArray(r)?r.length>0?null:e:r==null||r===!1?e:null}const Ne="_title_1xc8r_1",We={title:Ne},qe=()=>{const{login:t}=l.useContext(me),e=ye(),r=be(),n=_e({mode:"uncontrolled",initialValues:{name:"Tigran",email:"tigran.gabulyan.2001@mail.ru"},validate:{name:ve("Name is required"),email:i=>/^\S+@\S+$/.test(i)?null:"Invalid email"}});function s(i){t(i,()=>{var o;return e(((o=r.state)==null?void 0:o.from)??"/")})}return I.jsxs(Ve,{size:420,my:40,children:[I.jsx(pe,{ta:"center",className:We.title,children:"Welcome back!"}),I.jsx(Se,{c:"dimmed",size:"sm",ta:"center",mt:5,children:"Just enter your email"}),I.jsx(Ee,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:I.jsxs("form",{onSubmit:n.onSubmit(i=>s(i)),children:[I.jsx(M.Wrapper,{withAsterisk:!0,label:"Your name",id:"userName",mb:"sm",children:I.jsx(M,{type:"text",placeholder:"Alex",autoComplete:"name webauthn",id:"userName",...n.getInputProps("name")},n.key("name"))}),I.jsx(M.Wrapper,{withAsterisk:!0,label:"Email",id:"userEmail",children:I.jsx(M,{type:"email",placeholder:"your@email.com",id:"userEmail",autoComplete:"email webauthn",...n.getInputProps("email")},n.key("email"))}),I.jsx(ge,{fullWidth:!0,mt:"lg",type:"submit",children:"Sign in"})]})})]})};export{qe as Authentication};
